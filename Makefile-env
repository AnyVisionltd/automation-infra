# IMAGE_DOCKER_FILE ?= $(shell ../anv-common/dockerize/dockerize-tag)
# IMAGE_REGISTRY ?= gcr.io/
# IMAGE_REPOSITORY ?= "anyvision-training/"
# IMAGE_NAME ?= ""
# IMAGE_TAG ?= $(shell git log -n 1 --pretty=format:%H | cut -c 1-12)
# FULL_IMAGE_NAME ?= $(IMAGE_REGISTRY)$(IMAGE_REPOSITORY)$(IMAGE_NAME):$(IMAGE_TAG)

ROOT_DIR:=$(shell dirname $(realpath $(firstword $(MAKEFILE_LIST))))
PARENT_ROOT_DIR := $(abspath $(dir $(lastword $(MAKEFILE_LIST)))/..)
OS ?= $(shell hostnamectl status | grep "Operating System" | cut -d ':' -f 2 | awk '{print tolower($$1)}' | tr -d '[:blank:]')

.PHONY: set-connection-file
set-connection-file:
include $(ROOT_DIR)/dev_environment/makefiles/Makefile.hardware


.PHONY: docker-%
docker-%:
include $(ROOT_DIR)/dev_environment/makefiles/Makefile.docker


.PHONY: aws-%
aws-%:
include $(ROOT_DIR)/dev_environment/makefiles/Makefile.aws


.PHONY: git-%
git-%:
include $(ROOT_DIR)/dev_environment/makefiles/Makefile.git


.PHONY: install
install: docker-install aws-install git-install


.PHONY: config
config: set-connection-file docker-config aws-config


.PHONY: all
all: install config